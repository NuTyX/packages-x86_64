# Depends on: libtirpc rpcbind

description="Userspace server and client tools necessary to use the kernel's NFS abilities."
url="http://nfs.sourceforge.net"
packager="tnut <tnut@nutyx.org>"

name=nfs-utils
version=2.1.1
release=2

source=(nfs-utils-2.1.1-gcc-7.2-1.patch
	http://downloads.sourceforge.net/nfs/$name-$version.tar.bz2)
run=(rpcbind)

build() {
source  /etc/blfs-bootscripts
wget \
http://www.linuxfromscratch.org/blfs/downloads/svn/$scripts-$scriptsversion.tar.bz2
tar xvf $scripts-$scriptsversion.tar.bz2 
	
# build package

cd $name-$version
patch -Np1 -i ../nfs-utils-2.1.1-gcc-7.2-1.patch
./configure --prefix=/usr     \
--sysconfdir=/etc \
--sbindir=/sbin   \
--disable-nfsv4   \
--disable-gss \
--without-tcp-wrappers		

make
mkdir $PKG/sbin
make DESTDIR=$PKG install
chmod u+w,go+r $PKG/sbin/mount.nfs
chown nobody.nogroup $PKG/var/lib/nfs

# Services
cd ../$scripts-$scriptsversion
make DESTDIR=$PKG install-nfs-server
}
