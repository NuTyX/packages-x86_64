# Depends on: icu cmake boost aspell cups qttools qtdeclarative gnutls kerberos boost ghostscript lcms libxml2 cairo desktop-file-utils shared-mime-info poppler

description="Desktop publishing software"
url="http://www.scribus.net"
packager="tnut <tnut@nutyx.org>"
contributors="Pierre B"

name=scribus
version=1.5.4

run=(shared-mime-info)
source=(scribus-1.5.4-poppler-0.64.0.patch
	https://downloads.sourceforge.net/${name}/${name}-${version}.tar.xz)

build() {
	cd $name-$version
	patch -Np1 -i ../scribus-1.5.4-poppler-0.64.0.patch
#	sed -e 's|GBool|bool|g' -e 's|gTrue|true|g' -e 's|gFalse|false|g' -i scribus/plugins/import/pdf/*
	mkdir build
	cd build
	cmake ../ -DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_SKIP_RPATH=ON \
                -DLIB_SUFFIX=""
	make
	make DESTDIR=$PKG install
	install -Dm644 $SRC/$name-$version/scribus.desktop \
	$PKG/usr/share/applications/scribus.desktop
}
