description="Parse RSS and Atom feeds in Python
url="https://github.com/kurtmckee/feedparser

license="Custom"

packager="spiky <spiky@nutyx.org>"
contributors="Rems,Tnut"

makedepends=(libxml2)

name=python-feedparser
version=6.0.11

PKGMK_KEEP_SOURCES="no"
source=(https://github.com/kurtmckee/feedparser/archive/$version.tar.gz)

build() {
  cd feedparser-$version

  python3 /usr/lib/python3.11/compileall.py feedparser/sgml.py
  python3 setup.py build
  python3 setup.py install --prefix=/usr --root=$PKG

 install -Dm644 feedparser/sgml.py \
 $PKG/usr/lib/python3.11/site-packages/sgml.py

 install -Dm644 feedparser/__pycache__/sgml.cpython-311.pyc \
 $PKG/usr/lib/python3.11/site-packages/__pycache__/sgml.cpython-311.pyc

 install -Dm644 LICENSE $PKG/usr/share/licenses/$name/LICENSE
}
