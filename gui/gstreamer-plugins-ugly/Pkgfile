# Depends on: gstreamer-plugins-base lame libdvdread liba52 libmad libmpeg2 

description="GStreamer Multimedia Framework ugly Plugins"
url="http://gstreamer.freedesktop.org/modules/gst-plugins-ugly.html"
packager="tnut <tnut@nutyx.org>"
contributors="Pierre B"

_name=gst-plugins-ugly
name=gstreamer-plugins-ugly
version=1.14.4
release=2

source=(http://gstreamer.freedesktop.org/src/${_name}/gst-plugins-ugly-$version.tar.xz )

build() {
cd gst-plugins*

./configure --prefix=/usr \
--with-package-name="GStreamer Ugly Plugins $version NuTyX" \
--with-package-origin="http://downloads.nutyx.org/"
make
make DESTDIR=$PKG install

# Obsolet libs
rm $PKG/usr/lib/gstreamer-1.0/libgsta52dec.la
rm $PKG/usr/lib/gstreamer-1.0/libgstasf.la
rm $PKG/usr/lib/gstreamer-1.0/libgstdvdlpcmdec.la
rm $PKG/usr/lib/gstreamer-1.0/libgstdvdread.la
rm $PKG/usr/lib/gstreamer-1.0/libgstdvdsub.la
rm $PKG/usr/lib/gstreamer-1.0/libgstmpeg2dec.la
rm $PKG/usr/lib/gstreamer-1.0/libgstrealmedia.la
rm $PKG/usr/lib/gstreamer-1.0/libgstxingmux.la
}
uptodate() {
local url ext
name=${_name}
url="https://gstreamer.freedesktop.org/src/$name/"
ext=".tar.xz"
lynx -read_timeout=20 -dump -listonly -nonumbers \
$url|grep $name-[0-9]|grep $ext$|sed "s@$url$name-@@"|sed "s@$ext@@"|tail -1
}
