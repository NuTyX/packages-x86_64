# Depends on: glib libxml2 gsl gobject-introspection

description="GStreamer Multimedia Framework"
url="http://gstreamer.freedesktop.org/"
packager="tnut <tnut@nutyx.>"
contributors="Pierre B"

name=gstreamer
version=1.14.4
release=2

source=(https://gstreamer.freedesktop.org/src/gstreamer/gstreamer-$version.tar.xz)

build() {
cd gstreamer-$version
./configure --prefix=/usr \
--with-package-name="GStreamer $version NuTyX" \
--with-package-origin="http://downloads.nutyx.org/"
make
make DESTDIR=$PKG install

# Obsolets libs
rm $PKG/usr/lib/gstreamer-1.0/libgstcoreelements.la
rm $PKG/usr/lib/gstreamer-1.0/libgstcoretracers.la
rm $PKG/usr/lib/libgstbase-1.0.la
rm $PKG/usr/lib/libgstcheck-1.0.la
rm $PKG/usr/lib/libgstcontroller-1.0.la
rm $PKG/usr/lib/libgstnet-1.0.la
rm $PKG/usr/lib/libgstreamer-1.0.la
}
uptodate() {
local url ext

url="https://gstreamer.freedesktop.org/src/$name/"
ext=".tar.xz"
lynx -read_timeout=20 -dump -listonly -nonumbers \
$url|grep $name-[0-9]|grep $ext$|sed "s@$url$name-@@"|sed "s@$ext@@"|tail -1
}
